#!/bin/bash
# Script to launch the default editor on a specified diary entry.

function use_vim {
    vim "+set spell" "+syntax off" "$1"
}


# Decide which entry the user wants to edit.
range="-1::-1"
if [[ "$1" =~ ^(-|_)[0-9]+$ ]]; then
    low=${1/#_/-}
    high=$((low+1))
    range="$low:$high:-1"
    echo "range=$range"
elif [[ "$1" =~ ^\+?[0-9]+$ ]]; then
    low=$1
    high=$((low+1))
    range="$low:$high:1"
fi

use_vim "$(diary-range -r $range)"
# TODO backup with hg
